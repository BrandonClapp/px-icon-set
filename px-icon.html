<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html"/>
<link rel="import" href="../iron-icon/iron-icon.html"/>

<dom-module id="px-icon">
  <template>
    <style>
      :host {
        /* Create some vars we can manipulate asour icons change*/
        --px-icon-default-width: 22px;
        --px-icon-default-height: 22px;

        /* Update iron-icon vars so we can overwrite */
        --iron-icon-width: var(--px-icon-default-width);
        --iron-icon-height: var(--px-icon-default-height);

        /* Ensures the currentColor is overriden by the stroke color so text
           elements inside the SVG work correctly */
        color: var(--iron-icon-stroke-color, inherit);
        /* Reverses the standard iron-icon colors to have the stroke inherit
           currentcolor and fill default to none */
        fill: var(--iron-icon-fill-color, none);
        stroke: var(--iron-icon-stroke-color, currentColor);
        /* The rest of the properties are copied exactly from iron-icon */
        @apply --layout-inline;
        @apply --layout-center-center;
        position: relative;
        vertical-align: middle;

        width: var(--iron-icon-width);
        height: var(--iron-icon-height);
        @apply --iron-icon;
      }
      /* Also copied exactly from iron-icon */
      :host([hidden]) {
        display: none;
      }
      /* Forces iron-icon to inherit the :host scoped fill/stroke styles */
      iron-icon {
        color: inherit;
        fill: inherit;
        stroke: inherit;
      }
    </style>
    <iron-icon icon="[[icon]]"></iron-icon>
  </template>
</dom-module>
<script>
  Polymer({
    is:'px-icon',
    properties: {
      icon: String
    },

    observers: ['_updateSize(icon)'],

    /*
    * Update the default size based on the icon set
    */
    _updateSize: function() {
      // var prefix = this.icon.split(':')[0],
      //     meta = Polymer.Base.create('iron-meta', {type: 'iconset'}),
      //     size =  meta.byKey(prefix)['size'];

      // this.customStyle['--px-icon-default-width'] = size + 'px';
      // this.customStyle['--px-icon-default-height'] = size + 'px';

      // this.updateStyles();
    }
  })
</script>
